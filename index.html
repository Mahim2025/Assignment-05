<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Emergency Service Directory</title>
  <!-- fortawesome -->
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha512-DxV+EoADOkOygM4IR9yXP8Sb2qwgidEmeqAEmDKIOfPRQZOWbXCzLC6vjbZyy0vPisbH2SyW27+ddLVCN+OMzQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- DaisyUI + Tailwind CSS -->
  <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    .soft-card {
      background-color: #FFFFFF;
      border-radius: 1rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }
    .glass { backdrop-filter: blur(6px); }
  </style>
</head>
<!-- ✅ NAVBAR -->
<nav class="navbar bg-white bg-opacity-70 shadow sticky top-0 z-50">
  <div class="container mx-auto px-4 flex flex-col sm:flex-row items-center justify-between py-2 gap-3 sm:gap-0">
    <div class="flex items-center gap-3">
      <div class="w-16 h-16 sm:w-20 sm:h-20 rounded-full ring ring-white ring-offset-2 ring-offset-emerald-400 p-1">
        <img src="./assets/logo-dark.png" alt="Logo" class="w-full h-full object-contain rounded-full" />
      </div>
      <span class="text-xl sm:text-2xl font-bold leading-tight text-green-800">
        Emergency <br class="hidden sm:block" /> Service
      </span>
    </div>

    <div class="flex items-center gap-2 sm:gap-3">
      <div class="flex items-center bg-green-50 rounded-full px-3 py-1 gap-1">
        <span class="text-sm font-semibold text-black" id="heartCount">0</span>
        <img src="./assets/heart.png" alt="Heart" class="w-4 h-4" />
      </div>
      <div class="flex items-center bg-green-50 rounded-full px-3 py-1 gap-1">
        <span class="text-sm font-semibold text-black" id="coinCount">100</span>
        <img src="./assets/coin.png" alt="Coin" class="w-4 h-4" />
      </div>
      <button id="copyPill" class="btn btn-success btn-sm rounded-full text-white normal-case px-4">
        <span id="copyCount">0</span> Copy
      </button>
    </div>
  </div>
</nav>

<!-- ✅ HERO SECTION -->
<header class="w-full">
  <div class="hero min-h-[220px] bg-gradient-to-br from-green-900 via-green-900 to-emerald-900 text-white">
    <div class="hero-content text-center w-full">
      <div class="flex flex-col items-center w-full">
        <div class="mb-4">
          <div class="w-20 h-20 md:w-24 md:h-24 rounded-full ring ring-white ring-offset-2 ring-offset-emerald-400 bg-white p-1 flex items-center justify-center">
            <img src="./assets/logo.png" alt="Gov Logo" class="w-full h-full object-contain rounded-full" />
          </div>
        </div>
        <h1 class="text-2xl md:text-3xl font-extrabold">Emergency Service Directory</h1>
        <p class="text-sm md:text-base text-white/90 mt-2 px-4 max-w-2xl">
          Government Emergency Services at Your Fingertip - A Project by <strong>Government of the People's Republic of Bangladesh</strong>
        </p>
      </div>
    </div>
  </div>
</header>

<!-- ✅ MAIN SECTION -->
<section class="bg-white bg-opacity-70 pt-0">
  <main class="container mx-auto px-3 md:px-4 lg:px-6">
    <div class="grid grid-cols-12 gap-4 md:gap-6">
      
      <!-- Cards -->
      <section class="col-span-12 lg:col-span-9 mt-6 md:mt-10">
        <div id="cardGrid" class="grid sm:grid-cols-2 xl:grid-cols-3 gap-3 md:gap-5"></div>
      </section>

      <!-- Call History -->
      <aside class="col-span-12 lg:col-span-3 mt-6 md:mt-10">
        <div class="soft-card bg-base-100 rounded-2xl p-4 md:p-5">
          <div class="flex items-center justify-between mb-4">
            <div class="flex items-center gap-2">
              <span ><i class="fa-regular fa-clock"></i></span>
              <h2 class="font-semibold text-lg text-black">Call History</h2>
            </div>
            <button id="clearHistory" class="btn btn !bg-[#00A63E] text-white">Clear</button>
          </div>
          <ul id="historyList" class="space-y-3 max-h-[520px] overflow-auto pr-2"></ul>
        </div>
      </aside>

    </div>
  </main>
</section>

<!-- template section -->
<template id="cardTemplate">
  <div class="soft-card bg-base-100 rounded-2xl p-5 flex flex-col gap-4 relative">
    
    <!-- Icon + Heart -->
    <div class="flex justify-between items-start">
      <div class="avatar">
        <div class="w-8 h-8 rounded-xl bg-emerald-100 flex items-center justify-center text-2xl">
 <img data-role="icon" src="" alt="Service Icon" class="w-6 h-6 object-contain"/>        </div>
      </div>
      <button class="btn btn-ghost btn-circle btn-sm" data-role="heartBtn" aria-label="Add to favourites">
        <i class="fa-solid fa-heart text-gray-400 hover:text-red-500"></i>
      </button>
    </div>

    <!-- Title + Subtitle -->
    <div>
      <h2 class="font-bold text-xl leading-snug text-black" data-role="title">Service Name</h2>
      <p class="text-sm text-base-content " data-role="subtitle">Department</p>
    </div>

    <!-- Number -->
    <div>
      <div class="text-2xl font-extrabold tracking-wide text-black" data-role="number">999</div>
    </div>

    <!-- Badge + Buttons -->
    <div class=" items-center justify-between mt-auto">
      <div class="badge badge-outline text-sm    block" data-role="badge">Category</div> <br>
      <div class="flex  justify-between gap-2">
        <button class="btn btn btn-outline" data-role="copyBtn">
          <i class="fa-solid fa-copy mr-1"></i> Copy
        </button>
        <button class="btn btn btn-success text-white" data-role="callBtn">
          <i class="fa-solid fa-phone-volume mr-1"></i> Call
        </button>
      </div>
    </div>

  </div>
</template>







<!-- ✅ SCRIPT -->
<script>
(function () {
  function init() {
    const state = {
      coins: 100,
      hearts: 0,
      copies: 0,
      services: getServices(),
      history: []
    };

    const el = {
      heartCount: document.getElementById('heartCount'),
      coinCount: document.getElementById('coinCount'),
      copyCount: document.getElementById('copyCount'),
      copyPill: document.getElementById('copyPill'),
      cardGrid: document.getElementById('cardGrid'),
      historyList: document.getElementById('historyList'),
      clearHistory: document.getElementById('clearHistory'),
      cardTemplate: document.getElementById('cardTemplate')
    };

    renderCards();
    bindGlobalUI();
    updateCounters();

    function renderCards() {
      el.cardGrid.innerHTML = '';
      state.services.forEach(function (svc) {
        const card = el.cardTemplate.content.cloneNode(true);
        card.querySelector('[data-role="icon"]').src = svc.icon;
        card.querySelector('[data-role="title"]').textContent = svc.title;
        card.querySelector('[data-role="subtitle"]').textContent = svc.subtitle;
        card.querySelector('[data-role="number"]').textContent = svc.number;
        card.querySelector('[data-role="badge"]').textContent = svc.category;

        card.querySelector('[data-role="heartBtn"]').addEventListener('click', () => {
          state.hearts += 1;
          updateCounters();
        });

        card.querySelector('[data-role="copyBtn"]').addEventListener('click', () => {
          copyToClipboard(svc.number, function (ok) {
            if (ok) {
              state.copies += 1;
              updateCounters();
              alert('Copied: ' + svc.title + ' — ' + svc.number);
            } else {
              alert('Copy failed. Please copy manually: ' + svc.number);
            }
          });
        });

        card.querySelector('[data-role="callBtn"]').addEventListener('click', () => {
          if (state.coins < 20) {
            alert('Not enough coins. Need at least 20.');
            return;
          }
          state.coins -= 20;
          updateCounters();
          alert('Calling ' + svc.title + ' at ' + svc.number + '...');
          const when = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit' });
          state.history.unshift({ title: svc.title, number: svc.number, time: when });
          renderHistory();
        });

        el.cardGrid.appendChild(card);
      });
    }

    function renderHistory() {
      el.historyList.innerHTML = '';
      state.history.forEach(h => {
        const li = document.createElement('li');
        li.className = 'flex items-center justify-between gap-3 bg-white-100 rounded-xl border p-3';
        li.innerHTML = `
          <div>
            <div class="font-semibold text-lg text-black leading-tight">${escapeHTML(h.title)}</div>
            <div class="text-sm text-base-content text-black">${escapeHTML(h.number)}</div>
          </div>
          <div class="text-sm text-black">${escapeHTML(h.time)}</div>
        `;
        el.historyList.appendChild(li);
      });
    }

    function bindGlobalUI() {
      el.clearHistory.addEventListener('click', () => {
        state.history = [];
        renderHistory();
      });

      el.copyPill.addEventListener('click', () => {
        alert('Total copied so far: ' + state.copies);
      });
    }

    function updateCounters() {
      el.heartCount.textContent = state.hearts;
      el.coinCount.textContent = state.coins;
      el.copyCount.textContent = state.copies;
    }

    function copyToClipboard(text, cb) {
      if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(text).then(() => cb(true)).catch(() => fallbackCopy(text, cb));
      } else {
        fallbackCopy(text, cb);
      }
    }

    function fallbackCopy(text, cb) {
      const ta = document.createElement('textarea');
      ta.value = text;
      ta.setAttribute('readonly', '');
      ta.style.position = 'absolute';
      ta.style.left = '-9999px';
      document.body.appendChild(ta);
      ta.select();
      try {
        const ok = document.execCommand('copy');
        document.body.removeChild(ta);
        cb(ok);
      } catch {
        document.body.removeChild(ta);
        cb(false);
      }
    }

    function escapeHTML(str) {
      return String(str).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
    }

    function getServices() {
      return [
        { title: 'National Emergency Number', subtitle: 'National Emergency', number: '999', category: 'All', icon: './assets/emergency.png' },

        { title: 'Police Helpline Number', subtitle: 'Police', number: '999', category: 'Police', icon: './assets/police.png' },

        { title: 'Fire Service Number', subtitle: 'Fire Service', number: '999', category: 'Fire', icon: './assets/fire-service.png' },

        { title: 'Ambulance Service', subtitle: 'Ambulance', number: '1994-999999', category: 'Health', icon: './assets/ambulance.png' },

        { title: 'Women & Child Helpline', subtitle: 'Women & Child Helpline', number: '109', category: 'Help', icon: './assets/emergency.png' },

        { title: 'Anti-Corruption Helpline', subtitle: 'Anti-Corruption', number: '106', category: 'Govt.', icon: './assets/emergency.png' },

        { title: 'Electricity Helpline', subtitle: 'Electricity Outage', number: '16216', category: 'Electricity', icon: './assets/emergency.png' },

        { title: 'Brac Helpline', subtitle: 'Brac', number: '16445', category: 'NGO', icon: './assets/brac.png' },

        { title: 'Bangladesh Railway Helpline', subtitle: 'Bangladesh Railway', number: '163', category: 'Travel', icon: './assets/Bangladesh-Railway.png' },
      ];
    }
  }

  document.addEventListener('DOMContentLoaded', init);
})();
</script>
</body>
</html>


